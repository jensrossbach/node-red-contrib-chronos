<!--
Copyright (c) 2020 Jens-Uwe Rossbach

This code is licensed under the MIT License.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
-->

<script type="text/x-red" data-help-name="chronos-delay">
    <p>
        Delays each message passing through the node until a specific time
        is reached.
    </p>
    <h3>Inputs</h3>
    <p>
        The input message is forwarded as is but can also control the
        queueing behavior of the node when the following properties (of
        any type and value) are existing.
    </p>
    <dl class="message-properties">
        <dt>drop<span class="property-type">any</span></dt>
        <dd>
            If present, all message in the queue are dropped without being
            sent out.</dd>
        <dt>flush<span class="property-type">any</span></dt>
        <dd>
            If present, all message in the queue are immediately being sent
            out.
        </dd>
        <dt>enqueue<span class="property-type">any</span></dt>
        <dd>
            Can be combined with either of the above properties. If present,
            this message will be enqueued after dropping/flushing.
        </dd>
    </dl>
    <h3>Outputs</h3>
    <p>
        Delayed messages are sent to the output when the target time has
        been reached.
    </p>
    <h3>Details</h3>
    <p>
        This node queues incoming messages until a specific time is reached,
        which can be either manually entered or based on sun or moon position.
        When that time has been reached, all messages in the queue are forwarded
        to the output of the node.
    </p>
    <h3>Configuration</h3>
    <dl>
        <dt>Name</dt>
        <dd>The name of the node (optional).</dd>
        <dt>Configuration</dt>
        <dd>
            The configuration with the location to be used for sun/moon position
            calculations.
        </dd>
        <dt>When</dt>
        <dd>
            The target time when queued messages should be forwarded. Depending
            on the selection on the left side, the time can be specified directly,
            a sun or moon position based event can be selected or one of the
            user-defined sun positions can be entered.
        </dd>
        <dt>Offset</dt>
        <dd>
            An offset between -5h and +5h can be specified in minutes. The offset
            will be added to or substracted from the target time.
        </dd>
        <dt>Randomized</dt>
        <dd>
            When selected, the offset will be randomized between 0 and the
            specified value.
        </dd>
    </dl>
</script>
